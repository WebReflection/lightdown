/*! (c) Andrea Giammarchi - ISC License */
function lightdown(e){var r=[],c=function(e,r,n){switch(n=n.replace(/([*~_"]+)(?!\s)([\S\s]*?\S)\1/g,c),r.charAt(0)){case"*":r=1===r.length?"em>":"strong>";break;case"~":r="strike>";break;case"_":r="u>";break;case'"':return"“"+n+"”"}return"<"+r+n+"</"+r};return e.replace(/\x01/g,"").replace(/(`{2,})([\S\s]+?)\1(\r\n|\n|\r)?/g,function(e,c,n){var a=(/^([a-z]+)[\r\n]/i.exec(n)||["",""])[1];return a&&(a=a.toLowerCase(),n=n.slice(a.length)),n=n.replace(/^\s+|\s+$/g,""),r.push('<pre><code class="'+a+'">'+n+"</code></pre>"),""}).replace(/(`)(?!\s)([\S\s]*?\S)\1/g,function(e,c,n){return r.push("<code>"+n+"</code>"),""}).replace(/(^|\s)([a-z]{2,}:\/\/[^\s/$.?#-]+\.\S+)/g,function(e,c,n){return c=c+'<a href="'+n.replace(/"/g,"&quot;")+'">',n=n.replace(/^[a-z]{2,}:\/\/(www\.)?(.{0,36})(.+)$/,function(e,r,c,n){return c+(n.length<2?n:"…")}),r.push(c+n+"</a>"),""}).replace(/([*~_"]+)(?!\s)([\S\s]*?\S)\1/g,c).replace(/^( *)\*( +)/gm,"$1•$2").replace(/^> (\S.*)(\r\n|\n|\r)?/gm,"<blockquote>$1</blockquote>").replace(/\x01/g,function(){return r.shift()})}